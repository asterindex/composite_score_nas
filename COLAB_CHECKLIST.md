# ‚úÖ –ß–ï–ö–õ–Ü–°–¢ –î–õ–Ø –ó–ê–ü–£–°–ö–£ –ù–ê GOOGLE COLAB

## üìã –ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª—ñ–≤
- [ ] `dataset.zip` –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π –≤ `MyDrive/Studying/Experiments/Composite_score_nas/dataset.zip` (1.5GB)
- [ ] `synthesis_universal.py` –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π –≤ Colab

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Runtime
- [ ] Runtime ‚Üí Change runtime type ‚Üí **T4 GPU** (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- [ ] –ê–±–æ A100 (—à–≤–∏–¥—à–µ, –∞–ª–µ –¥–æ—Ä–æ–∂—á–µ)
- [ ] **–ù–ï** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ CPU (–±—É–¥–µ ~10x –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ)

### 3. ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É**

**–ù–Ü–ß–û–ì–û –ó–ú–Ü–ù–Æ–í–ê–¢–ò –ù–ï –ü–û–¢–†–Ü–ë–ù–û!**

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å —â–æ –≤—ñ–Ω –Ω–∞ Colab —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î –ø–æ–≤–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:
- N_TRIALS = 50 ‚úÖ
- MAX_SAMPLES = 2000 ‚úÖ
- EPOCHS_PER_TRIAL = 2 ‚úÖ
- FULL_EPOCHS = 15 ‚úÖ

–ü—Ä–∏ –∑–∞–ø—É—Å–∫—É –ø–æ–±–∞—á–∏—Ç–µ:
```
üöÄ –†–ï–ñ–ò–ú: –ü–û–í–ù–ò–ô –ü–†–û–ì–û–ù (Google Colab)
```

**–Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —à–≤–∏–¥–∫–æ** (10 trials), —Ä–æ–∑–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ –≤ –∫–æ–¥—ñ:
```python
# –†—è–¥–æ–∫ ~95
# FULL_RUN_MODE = False  # –ü—Ä–∏–º—É—Å–æ–≤–æ —à–≤–∏–¥–∫–∏–π —Ç–µ—Å—Ç
```

## üöÄ –ó–ê–ü–£–°–ö

### 1. –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç—É (–≤—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ!)
```python
%run synthesis_universal.py
```

**–ê–ë–û** —á–µ—Ä–µ–∑ —Ç–µ—Ä–º—ñ–Ω–∞–ª:
```bash
!python synthesis_universal.py
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:**
- ‚úÖ –ó–º–æ–Ω—Ç—É—î Google Drive
- ‚úÖ –ó–Ω–∞–π–¥–µ `dataset.zip` –≤ `MyDrive/Studying/Experiments/Composite_score_nas/`
- ‚úÖ –†–æ–∑–ø–∞–∫—É—î –¥–∞—Ç–∞—Å–µ—Ç (~2-3 —Ö–≤)
- ‚úÖ –ü–æ—á–Ω–µ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç!

### üîÑ 3. –Ø–∫—â–æ –≤—ñ–¥–∫–ª—é—á–∏–ª–æ—Å—è - –ü–†–û–°–¢–û –ü–ï–†–ï–ó–ê–ü–£–°–¢–ò–¢–ò!

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:**
- ‚úÖ –ó–Ω–∞–π–¥–µ checkpoint (`results/checkpoint.json` + `optuna_study.pkl`)
- ‚úÖ –í—ñ–¥–Ω–æ–≤–∏—Ç—å Optuna study
- ‚úÖ –ü—Ä–æ–¥–æ–≤–∂–∏—Ç—å —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –º–æ–¥–µ–ª—ñ
- ‚úÖ –ù–µ –≤—Ç—Ä–∞—Ç–∏—Ç—å –∂–æ–¥–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É!

**–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–æ–π —Å–∞–º–∏–π —Å–∫—Ä–∏–ø—Ç –∑–Ω–æ–≤—É - –≤—ñ–Ω —Å–∞–º –≤—Å–µ –∑—Ä–æ–±–∏—Ç—å!** üéØ

## ‚è±Ô∏è –û–ß–Ü–ö–£–í–ê–ù–ò–ô –ß–ê–°

| –§–∞–∑–∞ | T4 GPU | A100 GPU |
|------|--------|----------|
| Warmup (trials 1-15) | ~1.5 –≥–æ–¥ | ~45 —Ö–≤ |
| –°–∏–Ω—Ç–µ–∑ (trials 16-50) | ~1-1.5 –≥–æ–¥ | ~30-45 —Ö–≤ |
| –ü–æ–≤–Ω–µ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è (50 models √ó 15 epochs) | ~9-10 –≥–æ–¥ | ~3-4 –≥–æ–¥ |
| **–ó–ê–ì–ê–õ–û–ú** | **~12 –≥–æ–¥–∏–Ω** | **~5 –≥–æ–¥–∏–Ω** |

## üìä –©–û –û–ß–Ü–ö–£–í–ê–¢–ò

### –ü—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:
```
‚úì Trial 1/50 [Warmup]:
   Score: -3.2940 | Best: -3.2940
   –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞: 2 –±–ª–æ–∫—ñ–≤, Act=leaky_relu
```

### –ü—ñ—Å–ª—è Warmup (trial 15):
```
‚úÖ Composite Score –∫–∞–ª—ñ–±—Ä–∞—Ü—ñ—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ (15 trials)
```

### –ü—ñ—Å–ª—è —Å–∏–Ω—Ç–µ–∑—É (trial 50):
```
============================================================
–†–ï–ó–£–õ–¨–¢–ê–¢–ò –°–ò–ù–¢–ï–ó–£
============================================================
üèÜ –ù–ê–ô–ö–†–ê–©–ê –ê–†–•–Ü–¢–ï–ö–¢–£–†–ê: ...
```

### –ü–æ–≤–Ω–µ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è:
```
============================================================
–ú–û–î–ï–õ–¨ #1/50 (Trial 24)
============================================================
Epoch  1/15 | Train: 2.1170 | Val: 3.0843 | Time: 14.9s
...
Epoch 15/15 | Train: 0.8234 | Val: 1.2345 | Time: 15.1s
‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ! –ù–∞–π–∫—Ä–∞—â–∏–π Val Loss: 1.2345
```

### –§—ñ–Ω–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑:
```
============================================================
–ê–ù–ê–õ–Ü–ó –ö–û–†–ï–õ–Ø–¶–Ü–á COMPOSITE SCORE ‚Üí FINAL LOSS
============================================================
üìä Spearman –∫–æ—Ä–µ–ª—è—Ü—ñ—è:
   œÅ = 0.743
   ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–æ –∑–Ω–∞—á—É—â–∞ –∫–æ—Ä–µ–ª—è—Ü—ñ—è!
```

## üíæ –†–ï–ó–£–õ–¨–¢–ê–¢–ò

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ:

1. **–ù–∞ Google Drive (–∑ checkpoint'–∞–º–∏!):**
   
   **a) –ö–æ–∂–Ω—ñ 5 –º–æ–¥–µ–ª–µ–π (~–∫–æ–∂–Ω—ñ 30-60 —Ö–≤):**
   - `MyDrive/Studying/Experiments/Composite_score_nas/checkpoint/`
   - –ü—Ä–æ–º—ñ–∂–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è
   
   **b) –í –∫—ñ–Ω—Ü—ñ (~12 –≥–æ–¥):**
   - `MyDrive/Studying/Experiments/Composite_score_nas/results_full/`
   - –ü–û–í–ù–Ü —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤—Å—å–æ–≥–æ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É

2. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä:**
   - `synthesis_results.json` (–ø–æ–≤–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ + —Ç–æ–ø-3)
   - `trials_proxy_metrics.csv` (–º–µ—Ç—Ä–∏–∫–∏ –≤—Å—ñ—Ö trials)

**üí° –Ø–∫—â–æ Colab –≤—ñ–¥–∫–ª—é—á–∏—Ç—å—Å—è - —É –≤–∞—Å —î backup!**

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤:

```
MyDrive/Studying/Experiments/Composite_score_nas/
‚îú‚îÄ‚îÄ dataset.zip              ‚Üê –í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ
‚îú‚îÄ‚îÄ checkpoint/              ‚Üê –ö–æ–∂–Ω—ñ 5 –º–æ–¥–µ–ª–µ–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
‚îî‚îÄ‚îÄ results_full/            ‚Üê –§—ñ–Ω–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
    ‚îú‚îÄ‚îÄ synthesis_results.json  ‚Üê –ì–û–õ–û–í–ù–ò–ô –§–ê–ô–õ
    ‚îú‚îÄ‚îÄ trials_proxy_metrics.csv
    ‚îú‚îÄ‚îÄ proxy_stats.json
    ‚îî‚îÄ‚îÄ val_subset_idx.npy
```

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û!

### –Ø–∫—â–æ —â–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫:

1. **Runtime disconnected:**
   - –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –Ω–∞ Drive ‚úÖ
   - **–ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç - –≤—ñ–Ω –ø—Ä–æ–¥–æ–≤–∂–∏—Ç—å!** üîÑ
   - Checkpoint —Ñ–∞–π–ª–∏: `checkpoint.json`, `optuna_study.pkl`

2. **Out of memory:**
   - –ó–º–µ–Ω—à—ñ—Ç—å `FULL_BATCH_SIZE` –¥–æ 16
   - –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ A100

3. **–î–∞—Ç–∞—Å–µ—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ:**
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —à–ª—è—Ö: `MyDrive/Studying/Experiments/Composite_score_nas/dataset.zip`
   - –ü–µ—Ä–µ–º–æ–Ω—Ç—É–π—Ç–µ Drive: —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–æ–Ω—Ç—É—î

## üì± –ú–û–ù–Ü–¢–û–†–ò–ù–ì

–†–µ–∫–æ–º–µ–Ω–¥—É—é:
- –ó–∞–ª–∏—à–∏—Ç–∏ –≤–∫–ª–∞–¥–∫—É –≤—ñ–¥–∫—Ä–∏—Ç–æ—é (–∞–ª–µ –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ)
- –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –∫–æ–∂–Ω—ñ 2-3 –≥–æ–¥–∏–Ω–∏
- –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è (~12 –≥–æ–¥–∏–Ω) –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑ Drive

## ‚úÖ –ü–ï–†–ï–í–Ü–†–ö–ê –ü–Ü–°–õ–Ø –ó–ê–í–ï–†–®–ï–ù–ù–Ø

```python
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ —Ñ–∞–π–ª–∏ —î
!ls -lh results/
!ls -lh /content/drive/MyDrive/Studying/Experiments/Composite_score_nas/results_full/

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ç–æ–ø-3
import json
with open('results/synthesis_results.json') as f:
    data = json.load(f)
    print("–¢–æ–ø-3 –º–æ–¥–µ–ª—ñ:")
    for model in data['synthesis']['top3_models']:
        print(f"  Rank {model['rank']}: {model['num_blocks']} –±–ª–æ–∫—ñ–≤, {model['activation']}")
```

---

**–ì–æ—Ç–æ–≤–æ –¥–æ –∑–∞–ø—É—Å–∫—É? –í—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ? ‚úÖ**

**–ß–∞—Å –Ω–∞ Colab = –≥—Ä–æ—à—ñ. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è –î–í–Ü–ß–Ü –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º!** üí∞
